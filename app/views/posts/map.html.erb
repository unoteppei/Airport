<div class="map-search"><h1>空港を探す</h1></div>

<div class="airport-map">
  <input id="address" type="textbox" placeholder="空港名で検索">
  <input id="sbtn" type="button" value="検索" onclick="codeAddress()">
</div>

<div id='map'></div>

<style>
#map {
  height: 600px;
  width: 100%;
  margin-top: 30px;
}
</style>

<script type="text/javascript">
  function initMap() {
    let test ={lat: <%= @post.latitude %>, lng: <%= @post.longitude %>};
    let map = new google.maps.Map(document.getElementById('map'), {
              zoom: 15, 
              center: test
              });
    let transitLayer = new google.maps.TransitLayer();
    transitLayer.setMap(map);

    let contentString = '住所：<%= @post.airport_name %>';
    let infowindow = new google.maps.InfoWindow({
      content: contentString
    });

    let marker = new google.maps.Marker({
                  position:test,
                  map: map,
                  title: contentString
    });

    marker.addListener('click', function() {
      infowindow.open(map, marker);
    });
  }
</script>

<script src="https://maps.googleapis.com/maps/api/js?key=<%= ENV['API_KEY']%>&callback=initMap" async defer></script>
